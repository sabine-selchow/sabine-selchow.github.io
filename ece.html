<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>UN ECE Members Timeline</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- D3 + TopoJSON -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>

  <!-- Meta -->
  <meta name="description" content="Interactive timeline of membership in the UN Economic Commission for Europe (UNECE), 1947–2025." />
  <meta name="author" content="Sabine Selchow" />
  <meta name="funding" content="European Research Council, Grant Agreement No. 885285" />

  <!-- Styles -->
  <link rel="stylesheet" href="ece.css?v=20250921a" />
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="content-container header-content">
      <div class="site-name">Sabine Selchow</div>
      <nav aria-label="Primary">
        <ul class="nav-menu">
          <li><a href="index.html" class="active">Home &amp; Visualisations</a></li>
          <li><a href="about.html">About &amp; Publications</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- HEADLINE + DESCRIPTION -->
  <div class="content-container intro-flex">
    <img src="ece.svg" alt="UNECE emblem / cover image" class="intro-image" />
    <div class="intro-text-block">
      <h1 class="left-aligned">UN ECE Members: Timeline (1947–2025)</h1>

      <div id="description">
        <p><b>Date:</b> September 2025</p>
        <p>
          <b>Data source:</b>
          <a href="https://unece.org/member-states" target="_blank" rel="noopener" style="color:#d90c1a; text-decoration:none; font-weight:500;">
            Membership site
          </a>
          of the UN Economic Commission for Europe (UNECE)
        </p>
        <p>
          <b>Funded:</b> Part of a European Research Council (ERC) grant,
          <a href="https://www.ecoint.org" target="_blank" rel="noopener" style="color:#d90c1a; text-decoration:none; font-weight:500;">
            ECOINT
          </a>, Grant No. 885285
        </p>
        <p>
          This visualization shows the evolution of membership in UNECE from 1947 to September 2025.
          All information (including country names) is taken from the official UNECE site.
        </p>

        <ul>
          <li>Click a year or press <i>Play</i></li>
          <li>Hover the map for details</li>
          <li>Members:</li>
          <ul class="legend" style="margin:0; padding-left:20px; list-style-type:none;">
            <li>
              <span class="legend-box" style="background-color:#d90c1a;"></span>
              joined in selected year
            </li>
            <li>
              <span class="legend-box" style="background-color:#4A90E2;"></span>
              members as of selected year
            </li>
          </ul>
        </ul>
      </div>
    </div>
  </div>

  <!-- D3 VISUALIZATION -->
  <main>
    <div class="map-wrap">
      <svg id="ecafeViz" aria-label="UNECE Membership World Map"></svg>

      <!-- Members overlay (top-left on map) -->
      <aside id="memberOverlay" class="member-overlay" aria-label="Members grouped by join year">
        <div class="overlay-header">
          <span class="overlay-title">
            Members in <span id="overlayYear">1947</span>
          </span>
          <button id="overlayToggle" class="overlay-toggle" aria-label="Collapse list" title="Collapse/Expand">–</button>
        </div>
        <div id="memberOverlayBody" class="overlay-body"></div>
      </aside>
    </div>

    <section id="controls" aria-label="Timeline controls">
      <div id="yearDisplay" aria-live="polite">1947</div>
      <div class="stats">
        <span id="memberCount">0</span> members |
        <span id="newMemberCount">0</span> new this year
      </div>

      <div id="mainButtons">
        <button id="play" class="primary" aria-label="Play timeline">▶ Play</button>
        <button id="pause" class="secondary" aria-label="Pause timeline">⏸ Pause</button>
        <button id="reset" class="reset-style" aria-label="Reset timeline">Reset</button>
      </div>

      <div id="yearChips" class="year-chips" aria-label="Years with new members"></div>
    </section>
  </main>

  <!-- Tooltip -->
  <div id="tooltip" role="dialog" aria-hidden="true"></div>

  <!-- FOOTER -->
  <footer>
    <p>© 2025 Sabine Selchow</p>
  </footer>

  <!-- App JS -->
  <script src="ece.js?v=20250921a"></script>
  <noscript>This visualization requires JavaScript (D3) to run.</noscript>
</body>
</html>
